<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Profiling the Performance: &mdash; Delta Stepping Algorithm in Parallel : A beginner approach. 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Delta Stepping Algorithm in Parallel : A beginner approach. 0.0.1 documentation" href="index.html" />
    <link rel="next" title="Quick Reference" href="quickreference.html" />
    <link rel="prev" title="Set Up the graph." href="setup.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="profiling-the-performance">
<span id="profiling"></span><h1>Profiling the Performance:<a class="headerlink" href="#profiling-the-performance" title="Permalink to this headline">¶</a></h1>
<p>Julia has <cite>&#64;time</cite>, <cite>&#64;elapsed</cite> and  <cite>&#64;allocated</cite> profiling tools. The firs one, time the application and shows the memory allocations  but shows the result as well. The second one would only output the time and the third one would only output the memory allocations.</p>
<p>This code was implemented to time and measure the memory allocation of the algorithm.</p>
<div class="section" id="code-for-serial">
<h2>Code for serial<a class="headerlink" href="#code-for-serial" title="Permalink to this headline">¶</a></h2>
<div class="code bash highlight-python"><div class="highlight"><pre>using Images, Colors, FixedPointNumbers, ImageView
img=load(&quot;rose.png&quot;)
include(&quot;setup.jl&quot;)
include(&quot;deltastep.jl&quot;)
include(&quot;relax.jl&quot;)
include(&quot;path.jl&quot;)
graph=setup(img)
f=open(&quot;output.txt&quot;,&quot;w&quot;)
for i in [10,50,100,500,1000]
Time=@elapsed Deltastep(graph,5000,i)
Alloc=@allocated Deltastep(graph,5000,i)
write(f,&quot;  Deltastep : $i Time Elapsed $Time Memory Allocations : $Alloc \n&quot;)
end
close(f)
</pre></div>
</div>
</div>
<div class="section" id="code-for-parallel">
<h2>Code for parallel<a class="headerlink" href="#code-for-parallel" title="Permalink to this headline">¶</a></h2>
<div class="code bash highlight-python"><div class="highlight"><pre>using Images, Colors, FixedPointNumbers, ImageView
addprocs()
img=load(&quot;Imagenes/rose.png&quot;)
include(&quot;setup.jl&quot;)
include(&quot;relax.jl&quot;)
include(&quot;path.jl&quot;)
include(&quot;deltastepar.jl&quot;)
graph=setup(img)
f=open(&quot;outputpar.txt&quot;,&quot;w&quot;)
for i in [10,50,100,500,1000]
Time=@elapsed Deltastep(graph,5000,i)
Alloc=@allocated Deltastep(graph,5000,i)
write(f,&quot;Image :$size  Deltastep : $i Time Elapsed $Time Memory Allocations : $Alloc \n &quot;)
end
close(f)
</pre></div>
</div>
</div>
</div>
<div class="section" id="results">
<h1>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h1>
<p>Running the profiling tools on the super computer Stampede I obtained the following results:</p>
<p><img alt="experiment" src="_images/experiment.png" /></p>
<p>The parallel performance increased significatively. Even getting to a speed up of 2.9 which was closer to a linear performance.</p>
<p><img alt="allocations" src="_images/allocations.png" /></p>
<p>The results of the memory were kind of high in parallel. This is due to the used of the memory when I am creating the arrays in every node, and then merging the branches into the principal one.</p>
<p>Since julia is still on development (but now is reaching 0.5 dev version) is not available yet on Stampede. I use the binaries available to run it on stampede. But I could not run it with more than 3 process. Everytime I try to run it with more cores I got &#8220;Could not allocate pools&#8221;.</p>
</div>
<div class="section" id="analysis">
<h1>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h1>
<p>The performance observed on three processors of Stampede was about three times higher than in the serial code. This let us make conclusions on the weak scalling property of the code. However, due to the large size of the images, is important to notice that the performance was impacted great. In future releases this problem would be addressed. Specially using image compressing tools. that would let me describe the image very accurate with less pixels.</p>
<p>On the other hand, the problems I experienced running the code on Stampede shows that Julia is still on development and there are some compability problems in large scale computers. As well is necessary to increase the documentation coverage, specially for large scientific applications that requires more introduction for beginners.</p>
<p>However from the implementation is clear that Julia is a very dynamic language for programming. I have worked before in python, and it is easy to understand the new semantics given the proximity to that technical language in particular. In Images for instance, there is a comfortable and good proximity to matlab syntax.</p>
</div>
<div class="section" id="demo">
<h1>Demo<a class="headerlink" href="#demo" title="Permalink to this headline">¶</a></h1>
<p>As a demo I ran the code, using the node img[11637] as the beginning node and the node img[154455]. Then following the guide provided in the <em>quick reference</em> section I obtained the following image. I choose the view function of the gradient cost function so it is more visible the path found:</p>
<p><img alt="rose1" src="_images/rose1.png" /></p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Profiling the Performance:</a><ul>
<li><a class="reference internal" href="#code-for-serial">Code for serial</a></li>
<li><a class="reference internal" href="#code-for-parallel">Code for parallel</a></li>
</ul>
</li>
<li><a class="reference internal" href="#results">Results</a></li>
<li><a class="reference internal" href="#analysis">Analysis</a></li>
<li><a class="reference internal" href="#demo">Demo</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="setup.html" title="previous chapter">Set Up the graph.</a></li>
      <li>Next: <a href="quickreference.html" title="next chapter">Quick Reference</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/profiling.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Ivan Felipe Rodriguez Rodriguez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/profiling.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>